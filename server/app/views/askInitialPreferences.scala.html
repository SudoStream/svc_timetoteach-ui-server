@import be.objectify.deadbolt.scala.AuthenticatedRequest
@(handler: be.objectify.deadbolt.scala.DeadboltHandler, userPictureUri: Option[String], userFirstName: Option[String], userFamilyName: Option[String], tttUser: io.sudostream.timetoteach.messages.systemwide.model.User, postInitialPreferencesUrl: Call)(implicit request: AuthenticatedRequest[Any])

@timetoteachAppMain(handler, "Setup Questions",
    userPictureUri, userFirstName, userFamilyName) {

    <div class="container justify-content-center">

        <section id="askInitialPreferencesForm">
            <form action="@postInitialPreferencesUrl.url" method="post" id="needs-validation" novalidate>
                @helper.CSRF.formField
                <div class="school-form-section">

                    <button id="initial-prefs-school-times-info-button" type="button" data-html="true" data-dismiss="modal" class="btn btn btn-secondary d-flex justify-content-end"
                    data-toggle="popover" title="School Times Help" data-placement="left"
                    data-content="<p>
                                Currently we assume one break per day, in the morning, and no afternoon break. In the future
                                this will be more adaptable.
                                </p>" >
                        <span aria-hidden="true"><strong>&#9432;</strong></span>
                    </button>

                    <h6 class="text-center text-muted form-header">School Times</h6>

                    <div class="form-row">

                        <input id="schoolId" type="hidden" class="form-control input-small" name="schoolId" value="@(if(tttUser.schools.nonEmpty){tttUser.schools.head.school.id}else{""})">

                        <div class="col-sm-3"></div>
                        <div class="col-sm-6">
                            <div class="form-row">
                                <div class="form-group bootstrap-timepicker timepicker col-sm-5">
                                    <label for="schoolStartTime">School Start</label>
                                    <input type="text" class="form-control input-small" id="schoolStartTime" name="schoolStartTime">
                                </div>
                                <div class="col-sm-2"></div>
                                <div class="form-group bootstrap-timepicker timepicker col-sm-5">
                                    <label for="schoolEndTime">School End</label>
                                    <input id="schoolEndTime" type="text" class="form-control input-small" name="schoolEndTime">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group bootstrap-timepicker timepicker col-sm-5">
                                    <label for="morningBreakStartTime">Morning Break Start</label>
                                    <input id="morningBreakStartTime" type="text" class="form-control input-small" name="morningBreakStartTime">
                                </div>
                                <div class="col-sm-2"></div>
                                <div class="form-group bootstrap-timepicker timepicker col-sm-5">
                                    <label for="morningBreakEndTime">Morning Break End</label>
                                    <input id="morningBreakEndTime" type="text" class="form-control input-small" name="morningBreakEndTime">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group bootstrap-timepicker timepicker col-sm-5">
                                    <label for="lunchStartTime">Lunch Start</label>
                                    <input id="lunchStartTime" type="text" class="form-control input-small" name="lunchStartTime">
                                </div>
                                <div class="col-sm-2"></div>
                                <div class="form-group bootstrap-timepicker timepicker col-sm-5">
                                    <label for="lunchEndTime">Lunch End</label>
                                    <input id="lunchEndTime" type="text" class="form-control input-small" name="lunchEndTime">
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-3"></div>
                    </div>
                </div>


                <div class="school-form-section">

                    <button id="initial-prefs-class-details-info-button" type="button" data-html="true" data-dismiss="modal" class="btn btn btn-secondary"
                    data-toggle="popover" title="Class Details Help" data-placement="left"
                    data-content="
                                <p>Again, for simplicity we're assuming one class per teacher at the moment. This will also be more
                                    flexible in the future.</p>

                                Secondly, the levels here cover all the levels in your class, but while planning you'll be able to create groups at
                                a more specific level - e.g. for differentiating, mixed class etc." >
                        <span aria-hidden="true"><strong>&#9432;</strong></span>
                    </button>


                    <h6 class="text-center text-muted form-header">Class Details</h6>

                    <div class="form-row">
                        <div class="col-sm-3"></div>
                        <div class="col-sm-6">
                            <label for="className">Class Name</label>
                            <input type="text" id="className" name="className" class="form-control" placeholder="Enter Your Class Name, e.g. P3AB" required>
                        </div>
                        <div class="col-sm-3"></div>
                    </div>

                    <div class="form-row classCurriculumLevelsRow">
                        <div class="col-sm-3"></div>
                        <div class="col-sm-6">
                            <label class="text-center">Select Class Levels </label>
                            <small class="text-muted">
                                - specifically the <cite title="Scottish Curriculum for Excellence">
                                Scottish Curriculum for Excellence
                            </cite>
                            </small>
                        </div>
                        <div class="col-sm-3"></div>
                    </div>
                    <div class="form-row justify-content-center">
                        <div class="col-sm-1"></div>
                        <div class="form-check col-sm-10 text-center">
                            <div class="col-sm-12">
                                <label class="custom-control custom-checkbox col-auto">
                                    <input type="hidden" name="check[0]" value="0" />
                                    <input id="checkEarlyCurriculum" name="checkEarlyCurriculum" class="custom-control-input" type="checkbox" value="On">
                                    <input name="checkEarlyCurriculum" type="hidden" value="Off">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">EARLY</span>
                                </label>
                                <label class="custom-control custom-checkbox col-auto">
                                    <input id="checkFirstCurriculum" name="checkFirstCurriculum" class="custom-control-input" type="checkbox" value="On">
                                    <input name="checkFirstCurriculum" type="hidden" value="Off">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">FIRST</span>
                                </label>
                                <label class="custom-control custom-checkbox col-auto">
                                    <input id="checkSecondCurriculum" name="checkSecondCurriculum" class="custom-control-input" type="checkbox" value="On">
                                    <input name="checkSecondCurriculum" type="hidden" value="Off">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">SECOND</span>
                                </label>
                                <label class="custom-control custom-checkbox col-auto">
                                    <input id="checkThirdCurriculum" name="checkThirdCurriculum" class="custom-control-input" type="checkbox" value="On">
                                    <input name="checkThirdCurriculum" type="hidden" value="Off">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">THIRD</span>
                                </label>
                                <label class="custom-control custom-checkbox col-auto">
                                    <input id="checkFourthCurriculum" name="checkFourthCurriculum" class="custom-control-input" type="checkbox" value="On">
                                    <input name="checkFourthCurriculum" type="hidden" value="Off">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">FOURTH</span>
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-1"></div>
                    </div>

                </div>

                <div class="form-submit-button text-center">
                    <button type="submit" class="btn btn-primary btn-lg">Submit</button>
                </div>
            </form>
        </section>
    </div>


    <script type="text/javascript">
            $('#schoolStartTime').timepicker({
                template: false,
                showInputs: false,
                minuteStep: 5,
                defaultTime: '09:00 AM'
            });
            $('#morningBreakStartTime').timepicker({
                template: false,
                showInputs: false,
                minuteStep: 5,
                defaultTime: '10:30 AM'
            });
            $('#morningBreakEndTime').timepicker({
                template: false,
                showInputs: false,
                minuteStep: 5,
                defaultTime: '10:45 AM'
            });
            $('#lunchStartTime').timepicker({
                template: false,
                showInputs: false,
                minuteStep: 5,
                defaultTime: '12:00 PM'
            });
            $('#lunchEndTime').timepicker({
                template: false,
                showInputs: false,
                minuteStep: 5,
                defaultTime: '01:00 PM'
            });
            $('#schoolEndTime').timepicker({
                template: false,
                showInputs: false,
                minuteStep: 5,
                defaultTime: '03:00 PM'
            });


    </script>

    <script>
            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            });
            $(function () {
                $('[data-toggle="popover"]').popover()
            });
    </script>

    <script>
            // Example starter JavaScript for disabling form submissions if there are invalid fields
            (function () {
                "use strict";
                window.addEventListener("load", function () {
                    var form = document.getElementById("needs-validation");
                    form.addEventListener("submit", function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add("was-validated");
                    }, false);
                }, false);
            }());
    </script>

}