@import models.timetoteach.TimeToTeachUserId
@(handler: be.objectify.deadbolt.scala.DeadboltHandler, userPictureUri: Option[String], userFirstName: Option[String], userFamilyName: Option[String], tttUserId: TimeToTeachUserId, classDetails: duplicate.model.ClassDetails)

@timetoteachAppMain(handler, s"${classDetails.className.name} Termly Plans",
    userPictureUri, userFirstName, userFamilyName) {
    <div class="in-app-menu-small-devices">
        <li class="nav-item nav-login-button">
            <a class="btn btn-outline-primary btn-block" role="button" href="@routes.Application.timeToTeachApp()">
                Dashboard</a>
        </li>

        <li class="nav-item nav-login-button ">
            <a class="btn btn-outline-primary btn-block" role="button" href="@controllers.planning.termly.routes.TermlyPlansController.termlyPlans()">
                Termly Plans Home</a>
        </li>

        <li class="nav-item nav-login-button">
            <a class="btn btn-outline-primary btn-block" role="button"
            href="@controllers.planning.classtimetable.routes.ClassTimetableController.manageClass(classDetails.id.id)">
                Manage @classDetails.className.name</a>
        </li>

        <li class="nav-item nav-login-button">
            <a id="manage-class-goto-timetable" class="btn btn-outline-primary btn-block" role="button"
            href="@controllers.planning.classtimetable.routes.ClassTimetableController.classTimetable(classDetails.id.id)">
                Class Timetable</a>
        </li>

    </div>
} {
    <div class="container">
        <div class="manage-class-form-section">
            <div class="in-app-menu-medium-and-up">
                <div class="d-flex ">
                    <ul class="nav mr-auto justify-content-between">
                        <li class="nav-item manage-class-nav-item-leftmost">
                            <a class="btn btn-outline-primary" role="button" href="@routes.Application.timeToTeachApp()">
                                Dashboard</a>
                        </li>
                        <li class="nav-item manage-class-nav-item-on-left">
                            <a class="btn btn-outline-primary" role="button" href="@controllers.planning.termly.routes.TermlyPlansController.termlyPlans()">
                                Termly Plans Home</a>
                        </li>
                        <li class="nav-item manage-class-nav-item-on-left">
                            <a class="btn btn-info" role="button"
                            href="@controllers.planning.classtimetable.routes.ClassTimetableController.manageClass(classDetails.id.id)">
                                Manage @classDetails.className.name</a>
                        </li>
                        <li class="nav-item manage-class-nav-item-on-left">
                            <a id="manage-class-goto-timetable" class="btn btn-info" role="button"
                            href="@controllers.planning.classtimetable.routes.ClassTimetableController.classTimetable(classDetails.id.id)">
                                Class Timetable</a>
                        </li>
                    </ul>
                    <ul class="nav justify-content-end">
                        <li class="nav-item manage-class-nav-item-rightmost">
                            <a id="termly-plans-edit" role="button" class="btn btn-primary"
                            href="@controllers.planning.termly.routes.TermlyPlansController.termlyPlansSelectCurriculumAreas(classDetails.id.id)">
                                Re-Select Curriculum Areas</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>


        <div class="termly-plans-overview-section text-center">
            <h4 class="termly-plans-overview-section-header">Termly Plans</h4>

            <div id="termly-plans-overview-of-all-classes-section">
                <div class="in-app-menu-medium-and-up">
                    <div class="termly-plans-overview-headers">
                        <div class="row">
                            <div class="col-lg-3"><small class="text-muted">Curriculum Area</small></div>
                            <div class="col-lg-1"></div>
                            <div class="col-lg-4"><small class="text-muted">Plan Progress</small></div>
                            <div class="col-lg-4"></div>
                        </div>
                    </div>
                </div>

                <div class="row termly-plans-overview-section-row">
                    <div class="col-xs-3 col-lg-3">
                        <a class="btn btn-sm btn-primary btn-block" data-toggle="collapse"
                        href="#collapseClassGroup" role="button" aria-expanded="false" aria-controls="collapseClassGroup">
                            Maths
                        </a>
                    </div>
                    <div class="col-xs-3 col-lg-1"></div>
                    <div class="col-xs-3 col-lg-4">
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 0" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <span><strong>0%</strong></span>
                        </div>
                    </div>
                    <div class="col-xs-3 col-lg-2"></div>
                    <div class="col-xs-3 col-lg-2">
                        <button class="btn btn-sm btn-outline-success btn-block" role="button" href="#" disabled="true">
                            Share</button>
                    </div>
                </div>

                <div class="termly-plans-collapse-container">
                    <div class="collapse mx-auto" id="collapseClassGroup">
                        <div class="card card-body">
                            <div class="in-app-menu-medium-and-up">
                                <div class="termly-plans-overview-headers">
                                    <div class="row">
                                        <div class="col-lg-3"><small class="text-muted">Group</small></div>
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-3"><small class="text-muted">Level</small></div>
                                        <div class="col-lg-4"></div>
                                    </div>
                                </div>
                            </div>

                            @for(group <- classDetails.groups.sortBy(group => group.groupLevel)) {
                                @if(group.groupType.value == "Maths") {
                                    <div class="row termly-plans-group-row">
                                        <div class="col-lg-3">
                                            <a role="button" class="btn btn-info btn-sm btn-block"
                                            href="@controllers.planning.termly.routes.TermlyPlansController.termlyOverviewForGroup(classDetails.id.id, group.groupType.value, group.groupId.id)">@group.groupName.name.capitalize</a>
                                        </div>
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-3">
                                            <label>@group.groupLevel.value.toUpperCase.replace("LEVEL", "")</label>
                                        </div>
                                        <div class="col-lg-3"></div>
                                        <div class="col-lg-2">
                                            <span class="badge badge-pill badge-danger">Not Started</span>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                </div>


            </div>

        </div>
    </div>
}
