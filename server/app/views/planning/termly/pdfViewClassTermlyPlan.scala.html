@import io.sudostream.timetoteach.messages.systemwide.model.User
@import models.timetoteach.planning.pdf.CurriculumAreaTermlyPlanForPdfWrapper
@import models.timetoteach.term.{SchoolTerm, SchoolTermName}
@(classDetails: duplicate.model.ClassDetails, schoolTerm: SchoolTerm, todaysDatePretty: String, teachers: List[User], termlyPlan: CurriculumAreaTermlyPlanForPdfWrapper)

<!DOCTYPE html>
<html>
    <head>
        <title>View Termly Plan</title>
        <meta charset="utf-8">
        <style type="text/css">
                li {
                    list-style-type: none;
                }

                body {
                    font-size: 10px;
                }

                table {
                    border-collapse: collapse;
                    width: 100%;
                }

                .main-table th, .main-table td {
                    text-align: left;
                    padding: 8px;
                }

                .main-table th {
                    background-color: #718FA9;
                    color: #f7f7f7;
                }

                .main-table tr:nth-child(even) {
                    background-color: #f2f2f2;
                }

                .main-table tr:nth-child(odd) {
                    background-color: #f7f7f7;
                }

                #main-header-row {
                    margin-top: 40px;
                }

                #view-class-plans-termly-plan-header {
                    margin-top: 35px;
                    font-size: 12px;
                }

                .the-class-name {
                    font-size: larger;
                }

                .ttt-owl-image {
                    padding-left: 3px;
                    padding-right: 3px;
                }

                .make-float-right {
                    display: inline-flex;
                    float: right;
                }

                .message {
                    margin-top: 25px;
                    margin-bottom: 25px;
                }

                .new-curriculum-area {
                    padding: 5px;

                    margin-bottom: 80px;
                    /*background-color: #f6f6ff;*/
                    margin-top: 10px;
                }

                .single-benchmark {
                    margin-top: 8px;
                    margin-bottom: 8px;
                }

                .single-eando-code {
                    margin-top: 8px;
                    margin-bottom: 8px;
                }

                .new-group {
                    margin-top: 40px;
                }

                footer {
                    page-break-after: always;
                }
        </style>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    </head>


    <h6 class="text-muted">
        <span>
            Time To Teach
            <img class="ttt-owl-image" src="public/icons/ttt_owl.png" alt="ttt owl" height="16">
            <span class="ttt-url"><small>www.timetoteach.zone</small></span>
        </span>
        <span class="text-muted make-float-right">
            <small>created : @{
                todaysDatePretty
            }
            </small>
        </span>
    </h6>

    <div class="text-center text-primary">
        <h2>Termly Plan</h2>
    </div>

    <div id="view-class-plans-termly-plan-header" class="text-center text-info">
        <table >
            <tr>
                <th>
                    @{
                        classDetails.schoolDetails.name
                    },
                    @{
                        classDetails.schoolDetails.address.split(" ").toList.last
                    }
                </th>
                <th>
                    Class:
                    <strong>
                        <span class="the-class-name">@{
                            classDetails.className.name
                        }
                        </span>
                    </strong>
                </th>
                <th>
                    @{
                        SchoolTermName.niceValue(schoolTerm.schoolTermName)
                    },
                    @{
                        java.time.LocalDate.now().getYear
                    }
                </th>
                <th>
                    Teachers:
                    <span>
                    @for((teacher, index) <- teachers.zipWithIndex) {
                        @{
                            teacher.fullName
                        }
                        @if((index + 1) < teachers.size) {
                            ,
                        }
                    }
                    </span>
                </th>
            </tr>
        </table>
    </div>

    <div class="text-center message text-secondary font-italic font-weight-bold">
        ... Plan Details below is a work in progress ...
    </div>

    <div>
    @for(planningAreaWrapper <- termlyPlan.fullTermlyPlan.keys.toList.sortBy(elem => elem.niceValue())) {
        <div class="new-curriculum-area">
            <h4 class="text-center">
            @{
                planningAreaWrapper.niceValue()
            }
            </h4>

            @for(curriculumAreaTermlyPlan <- termlyPlan.fullTermlyPlan(planningAreaWrapper)) {
                <div class="text-primary font-weight-bold new-group">
                    <h3>@{
                    curriculumAreaTermlyPlan.maybeGroup match {
                        case Some(group) => s"${group.groupName.name} - ${group.groupLevel.value.replace("Level", " Level")}"
                        case None => ""
                    }
                }</h3>
                    <h5 class="text-muted">@{
                        curriculumAreaTermlyPlan.maybeGroup match {
                            case Some(group) => s"${group.groupDescription.name}"
                            case None => ""
                        }
                    }</h5>
                </div>

                <table class="main-table">
                    <tr>
                        <th class="text-center ">Es & Os</th>
                        <th class="text-center ">Benchmarks</th>
                    </tr>

                    @for(esOsBenchmarks <- curriculumAreaTermlyPlan.eAndOsWithBenchmarks) {
                        <tr>
                            <td width="50%">
                                <ul >
                                @for(eAndO <- esOsBenchmarks.eAndOCodes) {
                                    <li class="single-eando-code">
                                    @eAndO
                                    </li>
                                }
                                </ul>
                            </td>
                            <td width="50%">
                                <ul>
                                @for(benchmark <- esOsBenchmarks.benchmarks) {
                                    <li class="single-benchmark">
                                    @benchmark
                                    </li>
                                }
                                </ul>
                            </td>
                        </tr>

                    }
                </table>
            }
        </div>
        <footer></footer>
    }
    </div>


</html>
